(function(){var _1=20;var _2=0;var _3=null;var _4=null;var _5=0;var _6=location.hash;var _7="#_";var _8=[];var _9=0;var _a;var _b=false;var _c="portrait";var _d="landscape";window.iui={animOn:true,httpHeaders:{"X-Requested-With":"XMLHttpRequest"},showPage:function(_e,_f){if(_e){if(_4){_4.removeAttribute("selected");sendEvent("blur",_4);_4=null;}if(hasClass(_e,"dialog")){sendEvent("focus",_e);showDialog(_e);}else{sendEvent("load",_e);var _10=_3;sendEvent("blur",_3);_3=_e;sendEvent("focus",_e);if(_10){if(_f){sendEvent("unload",_10);}setTimeout(slidePages,0,_10,_e,_f);}else{updatePage(_e,_10);}}}},showPageById:function(_11){var _12=$(_11);if(_12){var _13=_8.indexOf(_11);var _14=_13!=-1;if(_14){_8.splice(_13,_8.length);}iui.showPage(_12,_14);}},showPageByHref:function(_15,_16,_17,_18,cb){function spbhCB(xhr){if(xhr.readyState==4){var _1b=document.createElement("div");_1b.innerHTML=xhr.responseText;sendEvent("beforeinsert",document.body,{fragment:_1b});if(_18){replaceElementWithFrag(_18,_1b);}else{iui.insertPages(_1b);}if(cb){setTimeout(cb,1000,true);}}}iui.ajax(_15,_16,_17,spbhCB);},ajax:function(url,_1d,_1e,cb){var xhr=new XMLHttpRequest();_1e=_1e?_1e.toUpperCase():"GET";if(_1d&&_1e=="GET"){url=url+"?"+iui.param(_1d);}xhr.open(_1e,url,true);if(cb){xhr.onreadystatechange=function(){cb(xhr);};}var _21=null;if(_1d&&_1e!="GET"){xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");_21=iui.param(_1d);}for(var _22 in iui.httpHeaders){xhr.setRequestHeader(_22,iui.httpHeaders[_22]);}xhr.send(_21);},param:function(o){var s=[];for(var key in o){s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(o[key]);}return s.join("&").replace(/%20/g,"+");},insertPages:function(_26){var _27=_26.childNodes;var _28;for(var i=0;i<_27.length;++i){var _2a=_27[i];if(_2a.nodeType==1){if(!_2a.id){_2a.id="__"+(++_9)+"__";}var _2b=$(_2a.id);var _2c;if(_2b){_2b.parentNode.replaceChild(_2a,_2b);_2c=$(_2a.id);}else{_2c=document.body.appendChild(_2a);}sendEvent("afterinsert",document.body,{insertedNode:_2c});if(_2a.getAttribute("selected")=="true"||!_28){_28=_2a;}--i;}}if(_28){iui.showPage(_28);}},getSelectedPage:function(){for(var _2d=document.body.firstChild;_2d;_2d=_2d.nextSibling){if(_2d.nodeType==1&&_2d.getAttribute("selected")=="true"){return _2d;}}},isNativeUrl:function(_2e){for(var i=0;i<iui.nativeUrlPatterns.length;i++){if(_2e.match(iui.nativeUrlPatterns[i])){return true;}}return false;},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/"),new RegExp("^javascript:"),],hasClass:function(_30,_31){var re=new RegExp("(^|\\s)"+_31+"($|\\s)");return re.exec(_30.getAttribute("class"))!=null;},addClass:function(_33,_34){if(!iui.hasClass(_33,_34)){_33.className+=" "+_34;}},removeClass:function(_35,_36){if(iui.hasClass(_35,_36)){var reg=new RegExp("(\\s|^)"+_36+"(\\s|$)");_35.className=_35.className.replace(reg," ");}}};addEventListener("load",function(_38){var _39=iui.getSelectedPage();var _3a=getPageFromLoc();if(_39){iui.showPage(_39);}if(_3a&&(_3a!=_39)){iui.showPage(_3a);}setTimeout(preloadImages,0);if(typeof window.onorientationchange=="object"){window.onorientationchange=orientChangeHandler;_b=true;setTimeout(orientChangeHandler,0);}setTimeout(checkOrientAndLocation,0);_a=setInterval(checkOrientAndLocation,300);},false);addEventListener("unload",function(_3b){return;},false);addEventListener("click",function(_3c){var _3d=findParent(_3c.target,"a");if(_3d){function unselect(){_3d.removeAttribute("selected");}if(_3d.href&&_3d.hash&&_3d.hash!="#"&&!_3d.target){_3d.setAttribute("selected","true");iui.showPage($(_3d.hash.substr(1)));setTimeout(unselect,500);}else{if(_3d==$("backButton")){history.back();}else{if(_3d.getAttribute("type")=="submit"){var _3e=findParent(_3d,"form");if(_3e.target=="_self"){_3e.submit();return;}submitForm(_3e);}else{if(_3d.getAttribute("type")=="cancel"){cancelDialog(findParent(_3d,"form"));}else{if(_3d.target=="_replace"){_3d.setAttribute("selected","progress");iui.showPageByHref(_3d.href,null,"GET",_3d,unselect);}else{if(iui.isNativeUrl(_3d.href)){return;}else{if(_3d.target=="_webapp"){location.href=_3d.href;}else{if(!_3d.target){_3d.setAttribute("selected","progress");iui.showPageByHref(_3d.href,null,"GET",null,unselect);}else{return;}}}}}}}}_3c.preventDefault();}},true);addEventListener("click",function(_3f){var div=findParent(_3f.target,"div");if(div&&hasClass(div,"toggle")){div.setAttribute("toggled",div.getAttribute("toggled")!="true");_3f.preventDefault();}},true);function sendEvent(_41,_42,_43){if(_42){var _44=document.createEvent("UIEvent");_44.initEvent(_41,false,false);if(_43){for(i in _43){_44[i]=_43[i];}}_42.dispatchEvent(_44);}}function getPageFromLoc(){var _45;var _46=location.hash.match(/#_([^\?_]+)/);if(_46){_45=_46[1];}if(_45){_45=$(_45);}return _45;}function orientChangeHandler(){var _47=window.orientation;switch(_47){case 0:setOrientation(_c);break;case 90:case -90:setOrientation(_d);break;}}function checkOrientAndLocation(){if(!_b){if(window.innerWidth!=_5){_5=window.innerWidth;var _48=_5==320?_c:_d;setOrientation(_48);}}if(location.hash!=_6){var _49=location.hash.substr(_7.length);iui.showPageById(_49);}}function setOrientation(_4a){document.body.setAttribute("orient",_4a);setTimeout(scrollTo,100,0,1);}function showDialog(_4b){_4=_4b;_4b.setAttribute("selected","true");if(hasClass(_4b,"dialog")){showForm(_4b);}}function showForm(_4c){_4c.onsubmit=function(_4d){};_4c.onclick=function(_4e){if(_4e.target==_4c&&hasClass(_4c,"dialog")){cancelDialog(_4c);}};}function cancelDialog(_4f){_4f.removeAttribute("selected");}function updatePage(_50,_51){if(!_50.id){_50.id="__"+(++_9)+"__";}location.hash=_6=_7+_50.id;_8.push(_50.id);var _52=$("pageTitle");if(_50.title){_52.innerHTML=_50.title;}var _53=_50.getAttribute("ttlclass");_52.className=_53?_53:"";if(_50.localName.toLowerCase()=="form"&&!_50.target){showForm(_50);}var _54=$("backButton");if(_54){var _55=$(_8[_8.length-2]);if(_55&&!_50.getAttribute("hideBackButton")){_54.style.display="inline";_54.innerHTML=_55.title?_55.title:"Back";var _56=_55.getAttribute("bbclass");_54.className=(_56)?"button "+_56:"button";}else{_54.style.display="none";}}}function slidePages(_57,_58,_59){var _5a=(_59?_57:_58).getAttribute("axis");clearInterval(_a);sendEvent("beforetransition",_57,{out:true});sendEvent("beforetransition",_58,{out:false});if(canDoSlideAnim()&&_5a!="y"){slide2(_57,_58,_59,slideDone);}else{slide1(_57,_58,_59,_5a,slideDone);}function slideDone(){if(!hasClass(_58,"dialog")){_57.removeAttribute("selected");}_a=setInterval(checkOrientAndLocation,300);setTimeout(updatePage,0,_58,_57);_57.removeEventListener("webkitTransitionEnd",slideDone,false);sendEvent("aftertransition",_57,{out:true});sendEvent("aftertransition",_58,{out:false});}}function canDoSlideAnim(){return (iui.animOn)&&(typeof WebKitCSSMatrix=="object");}function slide1(_5b,_5c,_5d,_5e,cb){if(_5e=="y"){(_5d?_5b:_5c).style.top="100%";}else{_5c.style.left="100%";}scrollTo(0,1);_5c.setAttribute("selected","true");var _60=100;slide();var _61=setInterval(slide,_2);function slide(){_60-=_1;if(_60<=0){_60=0;clearInterval(_61);cb();}if(_5e=="y"){_5d?_5b.style.top=(100-_60)+"%":_5c.style.top=_60+"%";}else{_5b.style.left=(_5d?(100-_60):(_60-100))+"%";_5c.style.left=(_5d?-_60:_60)+"%";}}}function slide2(_62,_63,_64,cb){_63.style.webkitTransitionDuration="0ms";var _66="translateX("+(_64?"-":"")+window.innerWidth+"px)";var _67="translateX("+(_64?"100%":"-100%")+")";_63.style.webkitTransform=_66;_63.setAttribute("selected","true");_63.style.webkitTransitionDuration="";function startTrans(){_62.style.webkitTransform=_67;_63.style.webkitTransform="translateX(0%)";}_62.addEventListener("webkitTransitionEnd",cb,false);setTimeout(startTrans,0);}function preloadImages(){var _68=document.createElement("div");_68.id="preloader";document.body.appendChild(_68);}function submitForm(_69){iui.addClass(_69,"progress");iui.showPageByHref(_69.action,encodeForm(_69),_69.method||"GET",null,clear);function clear(){iui.removeClass(_69,"progress");}}function encodeForm(_6a){function encode(_6b){for(var i=0;i<_6b.length;++i){if(_6b[i].name){args[_6b[i].name]=_6b[i].value;}}}var _6d={};encode(_6a.getElementsByTagName("input"));encode(_6a.getElementsByTagName("textarea"));encode(_6a.getElementsByTagName("select"));encode(_6a.getElementsByTagName("button"));return _6d;}function findParent(_6e,_6f){while(_6e&&(_6e.nodeType!=1||_6e.localName.toLowerCase()!=_6f)){_6e=_6e.parentNode;}return _6e;}function hasClass(_70,_71){return iui.hasClass(_70,_71);}function replaceElementWithFrag(_72,_73){var _74=_72.parentNode;var _75=_72;while(_74.parentNode!=document.body){_74=_74.parentNode;_75=_75.parentNode;}_74.removeChild(_75);var _76;while(_73.firstChild){_76=_74.appendChild(_73.firstChild);sendEvent("afterinsert",document.body,{insertedNode:_76});}}function $(id){return document.getElementById(id);}function ddd(){console.log.apply(console,arguments);}})();